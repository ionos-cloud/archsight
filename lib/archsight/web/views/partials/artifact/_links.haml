- instance = db.instance_by_kind(@kind, @instance)
- return unless instance
- link_annotations = instance.annotations.select { |k, _| k.start_with?('link/') }
- if link_annotations.any?
  %tr
    %th{scope: 'row'} Links
    %td
      - sorted_links = link_annotations.sort_by { |k, _| k.sub('link/', '').downcase }
      - if sorted_links.size > 10
        - sorted_links.group_by { |_, url| category_for_url(url) }.sort.each do |category, links|
          %strong= category
          %br
          - links.each do |k, url|
            %a{href: url, target: '_blank', rel: 'noopener noreferrer'}
              %span{class: icon_for_url(url)}
              = k.sub('link/', '')
            %br
          %br
      - else
        - sorted_links.each do |k, url|
          %a{href: url, target: "_blank", rel: "noopener noreferrer"}
            %span{ class: icon_for_url(url) }
            = k.sub("link/", "")
          %br
