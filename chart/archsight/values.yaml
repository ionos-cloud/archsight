replicaCount: 1

image:
  repository: ghcr.io/ionos-cloud/archsight
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80
  targetPort: 4567

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Application specific configuration
app:
  resourcesDir: /resources
  env: production

# Strategy for populating the /resources directory
# Options are "emptyDir", "configMap", "persistence" (PVC), or usage of "extraVolumes"
content:
  # type: "emptyDir" | "configMap" | "persistence" | "custom"
  # - emptyDir: Simple, ephemeral. Good if using initContainers to fetch data.
  # - configMap: Mounts a ConfigMap. Good for small, static datasets.
  # - persistence: Mounts a PersistentVolumeClaim. Good for large datasets.
  # - custom: Do not create the main volume automatically; rely on extraVolumes/extraVolumeMounts.
  type: emptyDir

  configMap:
    # If true, creating a ConfigMap from the `data` below.
    create: false
    # Name of the ConfigMap to mount (if create: false) or create (if create: true)
    # If create: true and name is empty, fullname + "-resources" is used.
    name: ""
    # Data to inject into the ConfigMap (filename: content)
    data:
      # sample.yaml: |
      #   apiVersion: architecture/v1alpha1
      #   kind: Analysis
      #   ...
      {}

  persistence:
    enabled: false
    # existingClaim: my-claim
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 1Gi
    annotations: {}

# Add sidecars or initContainers (e.g., for git-sync)
initContainers: []
  # Example: Fetching from a private repository using a specific Secret
  # - name: git-sync
  #   image: alpine/git
  #   env:
  #     - name: GIT_TOKEN
  #       valueFrom:
  #         secretKeyRef:
  #           name: my-git-credentials
  #           key: token
  #   command: ["/bin/sh", "-c"]
  #   args:
  #     - "git clone https://oauth2:$GIT_TOKEN@github.com/my-org/my-private-repo.git /resources"
  #   volumeMounts:
  #     - name: resources
  #       mountPath: /resources

sidecars: []
  # Example: Periodically update resources from a private repository
  # - name: git-sync-private
  #   image: alpine/git
  #   env:
  #     - name: GIT_TOKEN
  #       valueFrom:
  #         secretKeyRef:
  #           name: my-git-credentials
  #           key: token
  #   command: ["/bin/sh", "-c"]
  #   args:
  #     - |
  #       cd /resources
  #       # Ensure the remote uses the current token
  #       git remote set-url origin "https://oauth2:${GIT_TOKEN}@github.com/my-org/my-private-repo.git"
  #       while true; do
  #         git pull
  #         sleep 60
  #       done
  #   volumeMounts:
  #     - name: resources
  #       mountPath: /resources

# Custom volumes and mounts if you need more control
extraVolumes: []
extraVolumeMounts: []

# Command arguments (passed to ENTRYPOINT ["archsight"])
args: ["web", "--port", "4567", "-H", "0.0.0.0", "--production"]
